<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="referrer" content="no-referrer">
  <title>WINNERS TOUR</title>

  <!-- Fontes (mantidas) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;900&display=swap" rel="stylesheet">

  <!-- TEU CSS correto -->
  <link rel="stylesheet" href="assets/css/base.css">

  <!-- CSS do widget de busca -->
  <link rel="stylesheet" href="https://static.onertravel.com/widget/search/production/styles.css">

  <!-- Ajustes visuais pontuais -->
  <style>
    /* Logo sem sombra/filtro, em CAIXA ALTA, com contorno preto igual à página de evento */
    .wt-logo{
      text-transform: uppercase;
      text-shadow: none !important;
      filter: none !important;
      color: #fff;
      -webkit-text-stroke: 2px #000;
      paint-order: stroke fill;
      letter-spacing: .5px;
    }
    /* Favicon antes do título nos cards */
    .event-card .fav{
      width:24px;height:24px;object-fit:cover;border-radius:4px;margin-right:8px;vertical-align:-6px;
    }
    .event-card h3{display:inline;margin-left:6px}
  </style>
</head>
<body class="wt-body">
  <header class="wt-header">
    <div class="wt-container wt-header__inner">
      <!-- Texto em caixa alta como pediu -->
      <h1 class="wt-logo">WINNERS TOUR</h1>
      <a class="wt-whats" id="whatsLinkIndex" href="https://wa.me/?text=Ol%C3%A1!%20Quero%20saber%20sobre%20os%20eventos." target="_blank" rel="noopener">WhatsApp</a>
    </div>
  </header>

  <!-- ===== BLOCO DE APRESENTAÇÃO + CTA ===== -->
  <section class="cta-intro" aria-label="Apresentação e contato imediato">
    <h2>Precisa de ajuda? Chame aqui no WhatsApp</h2>
    <p>
      Fale direto com nossa equipe para <strong>check-in</strong>, <strong>remarcação</strong>, <strong>assentos</strong> e dúvidas durante a viagem.
      Atendimento humano e suporte imediato no WhatsApp. Se preferir, faça seu <strong>orçamento agora</strong> pela <em>loja virtual</em> logo abaixo.
      E mais embaixo você encontra nossos <strong>eventos, pacotes e destinos</strong>.
    </p>

    <div class="cta-actions">
      <a class="btn btn-whatsapp" target="_blank" rel="noopener"
         href="https://wa.me/5541999450111?text=Ol%C3%A1!%20Quero%20ajuda%20com%20minha%20reserva%20ou%20um%20or%C3%A7amento.">Falar no WhatsApp</a>
      <a class="btn btn-outline" href="https://www.comprarviagem.com.br/winnerstour/">Loja Virtual</a>
      <a class="btn btn-outline" href="https://www.winnerstour.com.br/">Site</a>
      <a class="btn btn-outline" href="#eventos">Eventos</a>
      <a class="btn btn-outline" href="#destinos">Destinos</a>
    </div>

    <div class="cta-divider" role="presentation"></div>
  </section>

  <!-- LOJA VIRTUAL WIDGET -->
  <div id="wrapper">
    <befly-widget language="pt-br" new-tab="true"></befly-widget>
  </div>
  <script src="https://static.onertravel.com/widget/search/production/widget-befly.js"></script>

  <main id="eventos" class="wt-container">
    <h2 class="wt-title">Eventos</h2>
    <div id="eventsGrid" class="cards-grid"></div>
  </main>

  <footer class="wt-footer">
    <div class="wt-container">© WinnersTour</div>
  </footer>

  <!-- Teu JS (mantido) -->
  <script src="assets/js/index.js"></script>

  <!-- Fallback: monta hero + favicon se não houver renderizador próprio -->
  <script>
  (async () => {
    try {
      const r = await fetch("/api/events");
      const { events } = await r.json();
      window.__EVENTS = events;

      // Se você já tiver uma função própria, ela prevalece:
      if (typeof renderEventCards === "function") { renderEventCards(events); return; }

      const grid = document.querySelector("#eventsGrid");
      if (!grid) return;

      grid.innerHTML = events.map(ev => {
        const hero = ev.banner.replace("-banner.", "-hero.");
        const favicon = ev.banner.replace("-banner.", "-favicon.");
        return `
          <a class="event-card" href="${ev.url}">
            <img loading="lazy" src="${hero}" onerror="this.onerror=null;this.src='${ev.banner}'" alt="${ev.title}">
            <h3><img class="fav" src="${favicon}" onerror="this.style.display='none'">${ev.emoji ? ev.emoji+' ' : ''}${ev.title}</h3>
            <p>${ev.subtitle || ""}</p>
          </a>`;
      }).join("");
    } catch (e) {
      console.error("Falha ao carregar /api/events", e);
    }
  })();
  </script>
</body>
</html>
